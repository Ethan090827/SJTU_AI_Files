## 第八讲 机器视觉 2
#### 2025/05/17

文件：[机器视觉-2-code.zip](https://oc.sjtu.edu.cn/courses/79997/files/11188056/download?download_frd=1)、[学森课程-机器视觉-2.pdf](https://oc.sjtu.edu.cn/files/11188055/download?download_frd=1)
作业：

### 0. 预备知识

#### 0.1 坐标系

- **坐标系**，是理科常用的辅助方法，常见的有**直线坐标系**，**平面直角坐标系**。为了说明质点的位置、运动的快慢、方向等，必须选取其坐标系。在参照系中，为确定空间中一点的位置，按规定方法选取的**有次序的一组数据**，这就叫“**坐标**”
- 坐标系的种类很多，常用的坐标系有：**笛卡尔坐标系**、**平面极坐标系**、**柱面坐标系**（或称**柱坐标系**）和**球面坐标系**（或称**球坐标系**）等
- 极坐标系中特殊直线的方程：
  1. 过原点（极点）的直线：$\theta=\alpha$ （斜率恒定不变）
  2. 平行于 $x$ 轴的直线：$\rho \cdot \sin \theta=C$ （到 $x$ 轴的距离不变）
  3. 平行于 $y$ 轴的直线：$\rho \cdot \cos \theta=C$ （到 $y$ 轴的距离不变）
- 极坐标系中一般直线的方程
  $$\begin{equation*}\begin{cases}x_1=\rho\cos\theta\\y_1=\rho\sin\theta\end{cases}\end{equation*}$$
  $$\begin{equation*}\begin{cases}x_1\cos\theta=\rho\cos^2\theta\\y_1\sin\theta=\rho\sin^2\theta\end{cases}\end{equation*}$$
  $$x_1\cos\theta+y_1\sin\theta=\rho$$


### 1. 直线与圆的检测

#### 1.1 直线检测

- 将 $A(x_1,y_1)$ 和 $B(x_2,y_2)$ 代入 $y=kx+q$ ，可得方程组：
  $$\begin{equation*}\begin{cases}q=-x_1k+y_1\\q=-x_2k+y_2\end{cases}\end{equation*}$$
  以 $q$ 为横坐标，$k$ 为纵坐标，上述两式为在 $(q,k)$ 平面的两条直线，称 $(q,k)$ 空间为**霍夫空间**
- 霍夫空间下直线的表示：霍夫空间中两条直线的交点所得的 $k'$ 和 $q'$ 为原空间中通过 $A$ 、$B$ 两点的直线的斜率和结局
- 霍夫空间下点的表示：霍夫空间中两条直线对应着原空间中的 $A$ 和 $B$ 两点
- **特殊情况**：经过横坐标相等的三点的直线的斜率 $k$ 为无穷大，那么在霍夫空间中相应的交点也在无穷远处，实际上计算机不能处理无穷大的数
- 为了处理这种情况，将直角坐标系转化为极坐标系，然后再进行霍夫变换。在极坐标下，一条直线由极径 $\rho$ 和极角 $\theta$ 唯一确定。霍夫空间变为以 $\theta$ 为横坐标，以 $\rho$ 为纵坐标。同样用在霍夫空间检测角点的方法来检测直线
- **步骤**：
  1. 离散化 $\theta$
     例如：$\theta=-45\degree, 0\degree, 45\degree, 90\degree$
  2. 按点的坐标 $(x,y)$ 和每个角度 $\theta$ 求 $r$ ：
     $$r=x\cos\theta+y\sin\theta$$
  3. 统计 $(r,\theta)$ 出现的次数
- **总结**：根据直角坐标系和极坐标系变换域之间的关系，总结霍夫变换具有如下主要性质：
  - 直角坐标系中的一点对应于极坐标中的一条**正弦曲线**
  - 变换域极坐标系中的一点对应于直角坐标系中的一条直线
  - 直角坐标系一条直线上的 $N$ 个点对应于极坐标系中**共点的 $N$ 条曲线**

#### 1.2 圆的检测

- 检测圆的原理与检测直线类似，不同的是只显示在二维空间，因为 $y=kx+q$ ，只有 $k$ 和 $q$ 两个参数。而圆形的一般性方程表示为 $(x-a)^2+(y-b)^2=r^2$ ，有三个参数：**圆心坐标** $(a,b)$ 和**半径** $r$ 。使用 $(a,b,r)$ 来确定一个圆心为 $(a,b)$ 、半径为 $r$ 的圆。图像平面的一个圆对应着参数空间的一个点，图像平面中的一点 $(x,y)$ 通过霍夫变换转换到 $(a,b,r)$ 参数空间得到一个三维锥面
- 过图像空间中任意一点的原对应于参数空间中的一个三维锥面。因此，过图像空间上一圆上的一点，对应的参数空间中的三维锥面，在 $r$ 高度必然相交于一点 $(a,b,r)$ 。这样通过检测这一点可以得到圆的参数，可求出过多个点的相应的圆。


### 2. 简单手势识别


